<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="stylesheet" type="text/css" href="assets/dist/themes/default/style.min.css">


</head>
<body>

    <div  id="jstree"></div>
    <button id="btn">모두삭제</button>
    <button id="btnBindJsonS">(싱글) 샘플json바인딩</button>
    <button id="btnBindJsonM">(멀티) 샘플json바인딩</button>

    <script src="assets/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="assets/dist/jstree.min.js" type="text/javascript"></script>

    <script type="text/javascript">
		var data = [
		       		{ "id" : "0001", "parent" : "#", "text" : "콜센터1" },
					{ "id" : "0002", "parent" : "0001", "text" : "고객상담" },
					{ "id" : "0003", "parent" : "0002", "text" : "수신상담" },
					{ "id" : "0004", "parent" : "0003", "text" : "수신1" },
					{ "id" : "0005", "parent" : "0003", "text" : "수신2" },
					{ "id" : "0006", "parent" : "0003", "text" : "수신3" },
					{ "id" : "0007", "parent" : "0002", "text" : "여신상담" },
					{ "id" : "0008", "parent" : "0007", "text" : "여신1" },
					{ "id" : "0009", "parent" : "0007", "text" : "여신2" },
					{ "id" : "0010", "parent" : "0007", "text" : "여신3" },
					{ "id" : "0011", "parent" : "0002", "text" : "사고신고" },
					{ "id" : "0012", "parent" : "#", "text" : "콜센터2" },
					{ "id" : "0013", "parent" : "0012", "text" : "인바운드" },
					{ "id" : "0014", "parent" : "0013", "text" : "인바운드1" },
					{ "id" : "0015", "parent" : "0013", "text" : "인바운드2" },
					{ "id" : "0016", "parent" : "0013", "text" : "인바운드3" },
					{ "id" : "0017", "parent" : "0012", "text" : "아웃바운드" },
					{ "id" : "0018", "parent" : "0017", "text" : "아웃바운드1" },
					{ "id" : "0019", "parent" : "0017", "text" : "아웃바운드2" },
					{ "id" : "0020", "parent" : "0017", "text" : "아웃바운드3" }
		    ];

    	$(document).ready(function() {
			try 
			{
		      	$("#btn").on("click",function() {
		      		$('#jstree').jstree("destroy").empty();
		      	});

		      	$("#btnBindJsonS").on("click",function() {
		      		BindSingle();
		      	});

		      	$("#btnBindJsonM").on("click",function() {
		      		BindMulti();
		      	});
		      	
		      	
			} catch(e) {
				alert(e);
			}
			
		});

		function BindSingle() {
			try {

				$("#jstree").jstree({
				     "core" : {
				        "data": data
				         ,"check_callback" : false
				     }
				     ,"plugins" : [ "contextmenu"]
		      	}).on('changed.jstree', function (e, data) {
						var i, j, r = [];
		                for (i = 0, j = data.selected.length; i < j; i++) {
		                    r.push(data.instance.get_node(data.selected[i]).text.trim());

		                    //alert(data.instance.get_node(data.selected[i]).text.trim());
		                    alert(data.instance.get_node(data.selected[i]).id.trim());
		                }
		                r.join(', ');
		            });

			} catch(e) {

			}
		}

		function BindMulti() {
			try {

				$("#jstree").jstree({
				     "core" : {
				        "data": data
				         ,"check_callback" : false
				     }
				     ,"plugins" : [ "checkbox", "contextmenu"]
		      	}).on('changed.jstree', function (e, data) {
						var i, j, r = [];
		                for (i = 0, j = data.selected.length; i < j; i++) {
		                    r.push(data.instance.get_node(data.selected[i]).text.trim());

		                    //alert(data.instance.get_node(data.selected[i]).text.trim());
		                    alert(data.instance.get_node(data.selected[i]).id.trim());
		                }
		                r.join(', ');
		            });
		      	
			} catch(e) {

			}
		}
	</script> 
</body>
</html>


