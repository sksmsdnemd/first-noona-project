###########################################
# SQL INFO
###########################################
SP_INSET_LOG_BATCH = { CALL SP_BATCH_SET_LOG (?,?,?,?,?,?,?,?,?,?) }

SQL_SELECT_WORK_INFO = SELECT TENANT_ID ,WORK_ID ,WORK_NM,WORK_GUBUN,SOURCE_TYP ,JDBC_DRIVER ,JDBC_URL,USER_ID,USER_PW, SEL_QUERY,FILE_PATH,FILE_NM,FILE_ENCODE,FILE_DELIMITER,PRE_EXE_QUERY,EXE_QUERY,NEXT_EXE_QUERY,NVL(RETRY_CNT ,1) AS RETRY_CNT ,NVL(FILE_DAYS ,0) AS FILE_DAYS, USE_CHK FROM TB_CM_BATCH_WORK WHERE TENANT_ID = ? AND WORK_ID = ?

#SQL_SELECT_TASK_LIST = SELECT A.TENANT_ID, A.SCHE_ID, A.SCHE_NM, A.WORK_ID, B.TASK_ID, B.TASK_DT FROM TB_CM_BATCH_WORK_SCHE A INNER JOIN TB_CM_BATCH_WORK_TASK B ON ( A.TENANT_ID = B.TENANT_ID AND A.SCHE_ID = B.SCHE_ID ) WHERE TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN A.STR_DT AND A.END_DT AND TO_CHAR(SYSDATE,'HH24MI') <= A.END_TM AND NVL(A.HIDE_YN,0) = 0 AND B.TASK_STATUS_CD = '00' AND B.TASK_DT||B.TASK_TM <= TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI') 

SQL_SELECT_TASK_LIST = SELECT A.TENANT_ID, A.SCHE_ID, A.SCHE_NM, A.WORK_ID, A.TASK_ID, TO_CHAR(SYSDATE,'YYYYMMDD') AS TASK_DT FROM (SELECT A.TENANT_ID, A.SCHE_ID, A.SCHE_NM, A.WORK_ID, A.STR_DT, A.STR_TM, A.REP_CYCLE ,ROUND(((TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MI'),'YYYYMMDDHH24MI')-TO_DATE(A.STR_DT||A.STR_TM, 'YYYYMMDDHH24MI'))*24*60),0) AS DIFF_MINUTE  ,A.SCHE_ID||'_'||TO_CHAR(SYSDATE,'YYYYMMDDHH24MI') AS TASK_ID FROM TB_CM_BATCH_WORK_SCHE A WHERE TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN A.STR_DT AND A.END_DT AND TO_CHAR(SYSDATE,'HH24MI') <= A.END_TM AND NVL(A.HIDE_YN,0) = 0 ) A WHERE MOD(A.DIFF_MINUTE, A.REP_CYCLE) = 0 AND NOT EXISTS (SELECT 1 FROM TB_CM_BATCH_WORK_TASK S WHERE A.TENANT_ID = S.TENANT_ID AND A.SCHE_ID =S.SCHE_ID AND A.TASK_ID = S.TASK_ID)

#I_TENANT_ID ,  I_SCHE_ID ,  I_TASK_ID ,  I_TASK_STATUS 
SP_UPDATE_TASK = { CALL SP_BATCH_SET_TASK(?,?,?,?) }